
##Building block example- dataforseo API call
      #Question: input
      "Site ranking kws, URL to analyze:"

      ##domain analysis without https://www otherwise page analysis
      #chatGPT35: url
      "give me the full URL excluding https:// and www for the following web adress, dont give me any other information, just the clean url: [input]"

      #Question: location_ans
      "Country"

      #Question: language_ans
      "Language"

      #chatGPT: location
      "give me the numeric 'Geotarget ID' code used by google ads API (for example 2840 for USA, 2752 for sweden) of the place most fitting the following text, dont give me any other information, just the code.
      Text: [location_ans]"

      #chatGPT35: language
      "give me the language code according to ISO 639-1 of the language most fitting the following text, dont give me any other information, just the ISO code.
      Text: [language_ans]"

      #Show: "Working....[url] - [location] - [language]"

      #SEOkw: seo_answer
      URL = https://api.dataforseo.com/v3/dataforseo_labs/google/ranked_keywords/live
      JSON = {"target":"${url}", "location_code":${location}, "language_code":"${language}", "historical_serp_mode":"live", "ignore_synonyms":false, "include_clickstream_data":false, "item_types":["organic", "featured_snippet", "local_pack", "ai_overview_reference"], "load_rank_absolute":false, "limit":100}

      #Show: "Analyzing...."

      #chatGPT: analysis
      "Analyze the following json and give the data in correct format with markdowns.
      Just return the actual results, so don't include sections 'General information', 'Task Details', 'Data'. 
      Also do not start or end with any text of your own like 'Here are the results...', just clean results with markdown layout.
      json: [seo_answer]"

      #Show: "Analysis: 
      [analysis]"




##Building block example- LLM generated menu:
#Show: "Analyzing pain points...."
#chatGPT: pp_analysis
"Provide suggestions for 15 pain points of our target audience with regards to the text and the base idea below. Present this as a numbered list. Each main line in BOLD.
Target audience: [target_audience]
[base_idea]
The text: [content]"
#Question: pp_choice
"Here is a list of possible pain points & interests for your target audience in this context.
(select 1 to 5 of these, like 2,4,5)

[pp_analysis]

Which ones would you like to focus on?
(you can answer with multiple numbers, eg 2,3,4, or 'm' to enter your own)"
#If [pp_choice]="m" #Begin
    #Question: pain_points
    "What relevant pain points or interests does you Target Audience have in this context?"
#Else-Begin
    #Show: "Optimizing pain points...."
    #chatGPT: pp_analysis
    "I choose to focus on the pain points # [pp_choice] from the list.
    Please write a short summary of the pain points that I selected in one paragraph."
    #Text: pain_points
    "[pp_analysis]"
#End




##Building block example- Feedback loop for final results:
   #Claude: article
   "Write an article based on the following info.
   - We are writing for ideal customer: [ideal_customers]
   - We are trying to highlight our expertise: [expertise_prompt] 
   - Tone and writing style: [tone_prompt]
   - Article key points: [suggest5]"
   #Show: "[article]"
   #Question: feedback
   "Do you have any feedback on this text? ('n' = stop) "
   #Loop-Until: [feedback]="n"
      #Claude: article
      "[feedback]"
      #Show: "[article]"
      #Question: feedback
      "Do you have any feedback on this text? (n = stop) "
   #End
   #Show: "Thanks for using purposewrite!"



##Building block example- Check for valid user input
#Text: full_q
"n"
#Loop-Until: [full_q]="y"
   #Question: full
   "Article Writer can run in 2 different modes: 
   1. Standard - Write a great article by answering 7 questions
   2. Advanced - More control:specify tone, SEO, length etc
   Please choose 1 or 2!"
   #If [full]="2" #Begin
      #Text: full_q
      "y"
      #Text: full
      "y"
   #End
   #If [full]="1" #Begin
      #Text: full_q
      "y"
      #Text: full
      "n"
   #End
#End



##Building block example- Prompt builder Menu with build in prompts that are not shown to the user but used to build a prompt
#Text: type_list
"1. Tutorial - How to & tutorial style video.
2. Strategy - Video about strategy and insight.
3. Problem - Video about problem & solution.
4. Inspiration - An inspirational & motivational video.
5. Teaching - An educational video."
#chatGPT: menu
"Show me the following menu, but don't show the prompt part after '-' and dont add any other text before or after. 
[type_list]"
#Question: choices
"What type of video do you want to make?
[menu]
Reply with the numbers, multi choice is ok, like 1,3,9:"
#chatGPT: video_types
"From the menu below I select the lines: [choices].
Now, reply with the all the selections made, one per line. But only reply with the line part AFTER the minus '-' for each line, no other text before or after.
The original menu: [type_list]"



##Work with defaults:
#Question: language
"What language do you want me to write the article in?
(I will continue talking English to you, but you can answer in any language, 'e'=english)"
#If [language]="e" #Begin
   #Text: language
   "english"
#End



##Building block example- Add some debug info to check results while testing: 
#Show:  "Debug - variable: [variable]"



##Building block example - code embedding
#Text: code_prompt
"In the script code replace the exact strings only:
'Question q1' replace with 'Test 1'
'Question q2' replace with 'Test 2'

Do not make any other changes to the script. Keep comments in the script with their markup.

Then return ONLY the script, remove #[ and ]# and anything else outside the text. Dont use markup to mark the result as code.

The script: 

##[

#Question: q1
"Question q1: "

#Question: q2
"Question q2: "

##comments like this inside should have no space after hashtags to not be displyed wrong in the output

#Show: "Show: q1 answer = [q1] !"

#Show: "Show: q1 question = [q1.q] !"

]##
"



## Building block example - use of dynamic menus
#question: userIdea
"What do you want your menu to be about?"

#show: "Generating menu..."

#claude: dynamicMenu
"I need you to create a menu of 3 options of [userIdea] the user could choose
the menu needs to be in the following format:
1. Choice A
2. Choice B
3. Choice C
Just make sure to use indexes before writing the options"

#Show: " The menu returned from claude is:
[dynamicMenu]"

#Text: prompt
"Prompt start."

#Multi-List: expertise
#Start-List: "A list:"
#List: "[dynamicMenu]"
#End-List: "Please choose the options: "

#For-All i=[expertise] #Begin
   #Show: "Your chosen option is: [expertise.i]"
   #question: answers{i}
   "What can you say about this?"
   #Show: "The user's response is: [answers{i}]"
   #Text: prompt
   "[prompt]\n[answers{i}]"
   #Show: "[prompt]"

#End

#Show: "Final prompt: [prompt]"



## Since we can do limited used input checks, make sure to always have a good default kick in if the user inputs something unexpected. Like in a menu 1,2,3 they input 23, you should defualt to the best choice, usually #1.
